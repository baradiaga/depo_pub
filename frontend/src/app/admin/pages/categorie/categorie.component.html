<div class="container">
  <h2 class="title">Gestion des Catégories</h2>

  <!-- Ajout -->
  <div class="form">
    <input [(ngModel)]="nouvelleCategorie.nom" placeholder="Nom de la catégorie" />

    <select [(ngModel)]="nouvelleCategorie.echelleId">
      <option *ngFor="let e of echellesConnaissance" [value]="e.id">
        {{ e.intervalle }} - {{ e.description }}
      </option>
    </select>

    <button (click)="ajouterCategorie()">Ajouter</button>
  </div>

  <!-- Liste -->
  <table>
    <thead>
      <tr>
        <th>Catégories</th>
        <th>Échelle de connaissance</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let categorie of categories">
        <!-- Affichage normal -->
        <td *ngIf="!editionCategorie || editionCategorie.id !== categorie.id">{{ categorie.nom }}</td>
        <td *ngIf="!editionCategorie || editionCategorie.id !== categorie.id">{{ categorie.echelleIntervalle }}</td>

        <!-- Mode édition -->
        <td *ngIf="editionCategorie && editionCategorie.id === categorie.id">
          <input [(ngModel)]="editionCategorie.nom" />
        </td>
        <td *ngIf="editionCategorie && editionCategorie.id === categorie.id">
          <select [(ngModel)]="editionCategorie.echelleId">
            <option *ngFor="let e of echellesConnaissance" [value]="e.id">
              {{ e.intervalle }} - {{ e.description }}
            </option>
          </select>
        </td>

        <!-- Actions -->
        <td>
          <button *ngIf="!editionCategorie || editionCategorie.id !== categorie.id" (click)="startEdition(categorie)">
            Modifier
          </button>
          <button *ngIf="!editionCategorie || editionCategorie.id !== categorie.id" (click)="supprimerCategorie(categorie.id)">
            Supprimer
          </button>

          <button *ngIf="editionCategorie && editionCategorie.id === categorie.id" (click)="validerModification()">
            Valider
          </button>
          <button *ngIf="editionCategorie && editionCategorie.id === categorie.id" (click)="annulerModification()">
            Annuler
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
