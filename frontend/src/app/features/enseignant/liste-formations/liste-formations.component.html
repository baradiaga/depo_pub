<div class="container mt-4">
  <h2>Liste des Formations</h2>

  <!-- Barre de recherche et filtre -->
  <form [formGroup]="formRecherche" class="row mb-3">
    <div class="col-md-6">
      <input id="recherche"
             type="text"
             class="form-control"
             placeholder="Rechercher par nom ou code"
             formControlName="recherche">
    </div>
    <div class="col-md-3">
      <select id="statut" class="form-select" formControlName="statut">
        <option *ngFor="let s of statuts" [value]="s">{{ s }}</option>
      </select>
    </div>
  </form>

  <!-- Spinner de chargement -->
  <div *ngIf="isLoading" class="text-center">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
  </div>

  <!-- Liste des formations -->
  <ul *ngIf="!isLoading && formationsFiltrees.length > 0" class="list-group">
    <li *ngFor="let f of formationsFiltrees" class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        <strong>{{ f.nom }}</strong>
        <small class="text-muted"> - {{ f.code }}</small>
        <div class="text-muted">{{ f.statut }}</div>
      </div>
      <div>
        <!-- Bouton Éditer -->
        <button class="btn btn-sm btn-primary me-2" (click)="editerFormation(f.id)">Éditer</button>
        <!-- Bouton Supprimer -->
        <button class="btn btn-sm btn-danger" (click)="supprimerFormation(f.id)">Supprimer</button>
      </div>
    </li>
  </ul>

  <!-- Message si aucune formation -->
  <div *ngIf="!isLoading && formationsFiltrees.length === 0" class="alert alert-info">
    Aucune formation trouvée.
  </div>
</div>
